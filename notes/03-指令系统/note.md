# 指令系统



## 通过习题理解各个段

*习题 3.4* 在实模式下 ，设(DS)=1000H， (ES)=2000H，(SS)=1200H，(BX)=0300H，
(SI)=0200H，(BP)=0100H，VAR 的偏移量为 0060H。若目标操作数为存储器操作数，试计
算下列各指令执行后目标操作数的物理地址是多少。

（1）`MOV AX,123` （2）`MOV DL,15`
（3）`MOV [BX],DX` （4）`MOV [0500H],DX`
（5）`MOV VAR,90H` （6）`MOV 6[BX],AX`
（7）`MOV 6[BP][SI],AL` （8）`MOV ES:[BX][SI],CX`

答案：

| 题号 | 物理地址 | 解析 |
| --- | --- | --- |
| (1) | --- | CPU 寻址，没有物理地址 |
| (2) | --- | CPU 寻址，没有物理地址 |
| (3) | 10300H | 数据段，可以写成`DS:[BX]`，所以物理地址为 1000H x 10H + 0300H = 10300H |
| (4) | 0500H | 数据段，可以写成`DS:[0500H]`，所以物理地址为 1000H x 10H + 0500H = 10500H |
| (5) | 10060H | 数据段，可以写成`DS:VAR`，所以物理地址为 1000H x 10H + 0060H = 10060H |
| (6) | 10306H | 数据段，可以写成`DS:[6+BX]`，所以物理地址为 1000H x 10H + 0306H = 10306H |
| (7) | 12306H | 堆栈段，可以写成`SS:[6+BP+SI]`，所以物理地址为 1200H x 10H + 6 + 0100H + 0200H = 12306H |
| (8) | 20306H | 附加段，可以写成`ES:[6+BX+SI]`，所以物理地址为 2000H x 10H + 0300H + 0200H = 20500H |

*习 题 3.5* 设 (DS)=2000H ， (SS)=3000H ， (CS)=1200H ， (BX)=0300H ， (IP)=0100H ，(20300H)=50H，(20301H)=01H，(20306H)=0BH，(20307H)=05H，试确定以下 JMP 指令转向的物理地址是多少。

（1）`JMP BX` （2）`JMP WORD PTR 6[BX]`

答案：

| 题号 | 物理地址 | 解析 |
| --- | --- | --- |
| (1) | 12300H | 代码段，可以写成`CS:[BX]`，所以物理地址为 1200H x 10H + 0300H = 12300H |
| (2) | 1250BH | 代码段，先到数据段取一个WORD，数据段地址可以写成`DS:[6+BX]`，数据段物理地址为 2000H x 10H + 6 + 0300H = 20306H，取出的WORD为 050BH，所以上面语句等效于`JMP 050BH`，所以物理地址为 1200H x 10H + 050BH = 1250BH |

## 其它

- `MOV AX,OFFSET MEM` 等效于 `LEA AX,MEM`，都是将MEM的偏移量（有效地址、偏移地址）送到AX中；







