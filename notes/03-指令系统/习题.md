## 习题

<details>
<summary>习题 3.3 分别指出下列指令中源操作数和目标操作数的寻址方式。

```asm
（1）MOV EBX,0ABC8H 
（2）MOV AL,128
（3）MOV [ECX],DX 
（4）MOV VAR,8
（5）MOV [1000H],DX 
（6）MOV 6[EBX],ECX
（7）MOV AX,[BX][SI] 
（8）MOV TAB[EBP][EDI],AL
```

</summary>
解答：

| 指令 | 目标操作数 | 源操作数 |
| :--: | :--------: | :------: |
| `MOV EBX,0ABC8H` | 寄存器 | 立即 |
| `MOV AL,128` | 寄存器 | 立即 |
| `MOV [ECX],DX` | 寄存器间接 | 寄存器 |
| `MOV VAR,8` | 直接 | 立即 |
| `MOV [1000H],DX` | 直接 | 寄存器 |
| `MOV 6[EBX],ECX` | 寄存器相对 | 寄存器 |
| `MOV AX,[BX][SI]` | 寄存器 | 基址变址 |
| `MOV TAB[EBP][EDI],AL` | 相对基址变址 | 寄存器 |

</details>

<details>
<summary>
习题 3.4 在实模式下 ，设(DS)=1000H， (ES)=2000H，(SS)=1200H，(BX)=0300H，
(SI)=0200H，(BP)=0100H，VAR 的偏移量为 0060H。若目标操作数为存储器操作数，试计算下列各指令执行后目标操作数的物理地址是多少。

```asm
（1）MOV AX,123
（2）MOV DL,15
（3）MOV [BX],DX
（4）MOV [0500H],DX
（5）MOV VAR,90H
（6）MOV 6[BX],AX
（7）MOV 6[BP][SI],AL
（8）MOV ES:[BX][SI],CX
```

</summary>
答案：

| 题号 | 物理地址 | 解析 |
| --- | --- | --- |
| (1) | --- | CPU 寻址，没有物理地址 |
| (2) | --- | CPU 寻址，没有物理地址 |
| (3) | 10300H | 数据段，可以写成`DS:[BX]`，所以物理地址为 1000H x 10H + 0300H = 10300H |
| (4) | 0500H | 数据段，可以写成`DS:[0500H]`，所以物理地址为 1000H x 10H + 0500H = 10500H |
| (5) | 10060H | 数据段，可以写成`DS:VAR`，所以物理地址为 1000H x 10H + 0060H = 10060H |
| (6) | 10306H | 数据段，可以写成`DS:[6+BX]`，所以物理地址为 1000H x 10H + 0306H = 10306H |
| (7) | 12306H | 堆栈段，可以写成`SS:[6+BP+SI]`，所以物理地址为 1200H x 10H + 6 + 0100H + 0200H = 12306H |
| (8) | 20306H | 附加段，可以写成`ES:[6+BX+SI]`，所以物理地址为 2000H x 10H + 0300H + 0200H = 20500H |
</details>

<details>
<summary>习题3.6 设2000:0100H单元有一条2字节的JMP SHORT LAB指令，若其中的位移量为：

1. 60H 
2. 80H 
3. 0E0H

试写出转向目标的物理地址是多少？
</summary>
答案：

因为 CS:0100H 处存放两字节指令，所以当执行该指令时(IP)=0102H

| 题号 | 物理地址 | 解析 |
| --- | --- | --- |
| (1) | 20162H | (CS) = 2000H，(IP) = 0102H，所以物理地址为 2000H x 10H + 0102H + 0060H = 20162H |
| (2) | 20082H | (CS) = 2000H，(IP) = 0102H，所以物理地址为 2000H x 10H + 0102H + 0FF80H = 20082H |
| (3) | 200E2H | (CS) = 2000H，(IP) = 0102H，所以物理地址为 2000H x 10H + 0102H + 0FFE0H = 200E2H |


</details>

<details>
<summary>习题3.9 指出错误

| 题号 | 语句 |
| --- | --- |
| (1) | `MOV [AX], BX` |
| (2) | `MOV AL, 1280` |
| (3) | `MOV [BX], 9` |
| (4) | `MOV DS, 1000H` |
| (5) | `MOV VAR, [BX]` |
| (6) | `MOV M1, M2` |
| (7) | `MOV 6, CX` |
| (8) | `MOV AX, [SI][DI]` |
| (9) | `MOV CS, AX` |
| (10) | `MOV BX, OFFSET VAR[SI]` |

</summary>

| 题号 | 语句 | 错误原因 |
| --- | --- | --- |
| (1) | `MOV [AX], BX` | 寄存器间接寻址方式<font color=red>不能用 AX 寄存器<font> |
| (2) | `MOV AL, 1280` | 源操作数<font color=red>超出目标范围</font> |
| (3) | `MOV [BX], 9` | 目标操作数类型未知 |
| (4) | `MOV DS, 1000H` | 立即数不能直接送段寄存器 |
| (5) | `MOV VAR, [BX]` | 两个操作数<font color=red>不能同时为存储器操作数</font> |
| (6) | `MOV M1, M2` | 两个操作数<font color=red>不能同时为存储器操作数</font> |
| (7) | `MOV 6, CX` | 目标操作数不能是立即数 |
| (8) | `MOV AX, [SI][DI]` | 源操作数寻址方式错 |
| (9) | `MOV CS, AX` | 目标操作数不能是代码段寄存器CS |
| (10) | `MOV BX, OFFSET VAR[SI]` | OFFSET 后只能跟变量或标号名 |

</details>

<details>
<summary>习题 3.24 试分析下面的程序段可实现的功能。

```asm
DX:AX=1234:5678H
MOV CL,4
SHL DX,CL
MOV BL,AH
SHL AX,CL
SHR BL,CL
OR DL,BL
```
</summary>

答案：把 DX 和 AX 一对寄存器所形成的 32 位内容左移四位。其中 DX 中为高 16 位，AX 中为低 16 位。
</details>